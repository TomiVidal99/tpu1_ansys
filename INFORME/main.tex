%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8
\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out
                                                          % if you need a4paper
%\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4

\usepackage{float}
                                                          % paper
% uso paquete bookmark para tener bien los outlines.
\usepackage{bookmark}

% Configuro el idioma.
\usepackage[utf8]{inputenc} % Importante para mantener acentos.
\usepackage[spanish, activeacute]{babel} % Requiere: texlive-lang-spanish. Por primera vez hay que ejecutar: texconfig init> log

% Paquete para poder usar acentos en $$.
\usepackage{mathtools}
%\setmathfont{XITS math}

% package to get \url
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=magenta,
  filecolor=magenta,
  citecolor=magenta,      
  urlcolor=magenta,
}

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document

\usepackage{graphicx}
\usepackage{graphics}

% styling for matlab/octave code.
\usepackage{matlab-prettifier}
% Configuracion, con esto puede agregar ñ.
\lstset{
  literate={ñ}{{\~n}}1
}

% The following packages can be found on http:\\www.ctan.org
%\usepackage{graphics} % for pdf, bitmapped graphics files
%\usepackage{epsfig} % for postscript graphics files
%\usepackage{mathptmx} % assumes new font selection scheme installed
%\usepackage{times} % assumes new font selection scheme installed
\usepackage{amsmath} % assumes amsmath package installed
%\usepackage{amssymb}  % assumes amsmath package installed

\title{\LARGE \bf Pr\'actica con Utilitario N° 1}

\author{
  Tom\'as Vidal\\
  {\it An\'alisis de Sistemas y Se\~{n}ales}\\
  {\it Facultad de Ingenier\'ia, UNLP, La Plata, Argentina.}\\
  {\it 21 de Mayo, 2023.}
}
% <-this % stops a space


% comienzo

% INTRO


% Figura
\newcommand{\image}[2] {
  \begin{figure}[H]
    \centering
    \includegraphics[width=0.43\textwidth]{../figures/#1.png}
    \caption{#2}
    \label{fig:#1}
  \end{figure}
}

% Codigo
% \begin{lstlisting}[style=Matlab-editor]
% % el código va aca
% dispc("HELLO WORLD");
% \end{lstlisting}

\begin{document}
\maketitle
\thispagestyle{empty}
\pagestyle{empty}

\section{INTRODUCCCI\'ON}
% TODO
En el presente se desarrollan detalladamente los m\'etodos y t\'ecnicas empleadas para la resoluci\'on de sistemas discretos, en particular de tipo lineal e invariante al desplazamiento (o en el tiempo), haciendo uso de la herramienta \href{https://octave.org/}{Octave}. \'Estos sistemas est\'an descriptos en ecuaciones en diferencias\footnote{ver ASyS2023\_PU1-1.pdf.}.
% Se resulve el trabajo pr\'actico dado a partir de los conocimientos y algoritmos aprendidos en las clases de Análisis de Sistemas y Se\~{n}ales. Para lo cual se cre\'o un script (main.m) que ejecuta todos los comandos y alogritmos pertinentes para generar los datos y gr\'aficos que se muestran posteriormente. Adem\'as todo el trabajo se encuentra hosteado en un \href{https://github.com/TomiVidal99/tpu1_ansys}{repositorio}\footnote{El repositorio se encuentra privado, para acceder hay que enviar un email a \href{mailto:vidal.tomas@alu.ing.unlp.edu.ar}{vidal.tomas@alu.ing.unlp.edu.ar}} de Github\footnote{Servicio basado en la nube que ayuda a desarrolladores a guardar y gestinonar c\'odigo.} por si el lector quiere indagar profundamente en el c\'odigo y en los algoritmos.

\section{Implementaci\'on de la \textbf{TFTD} en Octave}
\subsection{Marco Te\'orico} \label{subsec:TFTD}
La \textbf{transformada de Fourier de tiempo discreto} (\textbf{TFTD}) de una se\~{n}al dada se define como (Ref. \cite{tftd_tp5} y \cite{tftd_teoria})
\[
  TFTD\{x[n]\} = X(e^{j2{\pi}s}) = \sum_{-\infty}^{\infty}{x[n]e^{-j2{\pi}sn}}
\]
Pero como no se pueden computar infinitos t\'erminos se debe hacer una aproximaci\'on de la siguiente manera
\[
  \hat{X}(e^{j2{\pi}s}) \approx \sum_{n=-K}^{K}{x[n]e^{-j2{\pi}sn}}
\]
Aproximar desde $n=-K$ hasta $n=K$ es lo mismo que multiplicar toda la se\~nal por un caj\'on y sumarla desde $-\infty$ hasta $\infty$, es decir que el efecto de aproximar es despreciar informaci\'on de la se\~nal.
\[
  \sum_{n=-K}^{K}{x[n]e^{-j2{\pi}sn}} = \sum_{n=-\infty}^{\infty}{x[n]\sqcap[\frac{n}{2K}]e^{-j2{\pi}sn}}
\]

\subsection{Algoritmo en Octave}
\label{tftd_function}
\begin{lstlisting}[style=Matlab-editor] 
function [s, tftd] = TFTD(
  n, signal,
  defaultStep=1e-3)
  ds = defaultStep;
  s = [-.5:ds:.5];
  tftd = zeros(size(s));
  for k = 1:length(s)
    tftd(k) = sum(signal.*exp(-1j*2*pi*s(k)*n));
  end
end
\end{lstlisting}

\subsection{Prueba del Algoritmo}
Para poder hacer uso del algoritmo primero se realiz\'o el c\'alculo analítico de la \textbf{TFTD} de las siguientes se\~{n}ales a partir de propiedades y pares transformandos conocidos
\[
  Delta = \delta[\textbf{n}-n_o] \supset e^{-j2{\pi}\textbf{s}n_o}
\]
\[
  Tri\acute{a}ngulo = \wedge[\frac{\textbf{n}-b}{a}] \supset |a|.e^{-j2{\pi}\textbf{s}\frac{a}{b}}.sinc^2(a\textbf{s})
\]
Y luego se emple\'o el siguiente c\'odigo que calcula la \textbf{TFTD} de manera num\'erica con el algoritmo (ver \ref{tftd_function}) y la \textbf{TFTD} anal\'itica, para verificar que las aproximaciones sean lo ``suficientemente'' buenas

\begin{lstlisting}[style=Matlab-editor]
N = [1:100];

% Delta desplazada 20.
Senial1 = zeros(size(N0));
Senial1(20) = 1;
[s1, tftd1] = TFTD(N0, Senial1);

% Triangulo desplazado 50 y de base 5.
Senial2 = tri((N0-length(N0)/2)/5);
[s2, tftd2] = TFTD(N0, Senial2);

% Transformada analitica senial1
tftdAnaliticSenial1 = @(s) exp(-j*2*pi*20.*s);

% Transformada analitica senial2
tftdAnaliticSenial2 = @(s) 5.*exp(-2*pi*10.*s).*(sinc(5.*s).^2);

\end{lstlisting}

De lo cual se obtuvieron los siguientes resultados (Fig. \ref{fig:delta_tftd} y \ref{fig:triangulo_tftd}), que son acordes por la similitud a los c\'alculos analíticos (Fig. \ref{fig:delta_tftd_analitica} y \ref{fig:triangulo_tftd_analitica} respectivamente), por lo que se concluye que el algoritmo implementado es adecuado para \'esta aplicaci\'on.

% Resultados gráficos
\image{delta_tftd}{Se\~{n}al delta y el m\'odulo y fase de su TFTD num\'erica.}
\image{triangulo_tftd}{Se\~{n}al tri\'angulo y el m\'odulo y fase de su TFTD num\'erica.}
\image{delta_tftd_analitica}{Se\~{n}al delta y el m\'odulo y fase de su TFTD anal\'itica.}
\image{triangulo_tftd_analitica}{Se\~{n}al tri\'angulo y el m\'odulo y fase de su TFTD anal\'itica.}


\section{TFTD de la sen\~al provista}

Se obtuvo la se\~nal dada a partir de los comandos provistos\footnote{use el comando 'help senial' para m\'as informaci\'on.}, y como se puede apreciar en el gr\'afico (fig. \ref{fig:senial}) la misma est\'a compuesta de sinusoides superpuestas de componentes de alta y baja frecuencia.
\image{senial}{Se\~nal provista.}

Entonces haciendo uso del algoritmo desarrollado previamente (ver \ref{tftd_function}) se aproxim\'o la TFTD de la se\~{n}al dada (ver \ref{fig:senial_y_su_tftd}), de lo cual se puede observar que efectivamente lo hipotetizado sobre la se\~{n}al es cierto, pues la misma est\'a compuesta por otras dos: una de baja frecuencia preponderante, y otra de alta que influye menos (ver Fig. \ref{fig:tftd_senial_freqs}).
\image{senial_y_su_tftd}{Plot de la Se\~{n}al y el m\'odulo y fase de su TFTD.}
\image{tftd_senial_freqs}{Se indica las frecuencias predominantes en la TFTD de la se\~nal.}

\section{Sistemas de ecuaciones en diferencias}

\begin{thebibliography}{99}

% TODO
\bibitem{tftd_tp5}ANÁLISIS DE SISTEMAS Y SE\~{n}ALES - A\~{n}O 2022, Práctica 5 Transformada de Fourier de Tiempo Discreto (TFTD), Serie Discreta Fourier (SDF).
\bibitem{tftd_teoria}ANÁLISIS DE SISTEMAS Y SE\~{n}ALES - A\~{n}O 2022, Filminas de teor\'ia 5: Transformada de Fourier de Tiempo Discreto (TFTD).

\end{thebibliography}

\end{document}
